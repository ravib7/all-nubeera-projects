(function(_ds){var window=this;var Xga=async function(){return _ds.t((await _ds.r()).getConfig(),17)},Zga=async function(a){var b=Yga;const c=await Xga();if(c)return(await fetch(`${"https://dlp.googleapis.com/v2/projects/google.com:cloud-web-hats/content:deidentify"}?key=${c}`,{body:JSON.stringify({item:{value:a},deidentifyConfig:{infoTypeTransformations:{transformations:[{primitiveTransformation:{characterMaskConfig:{maskingCharacter:"*"}}}]}},inspectConfig:{minLikelihood:"POSSIBLE",infoTypes:b}}),headers:{"Content-Type":"application/json"},
method:"POST"})).json()};var $ga=["https://inthecloud.withgoogle.com/startup/dl-cd.html"],Yga=[{name:"FIRST_NAME"},{name:"LAST_NAME"},{name:"EMAIL_ADDRESS"},{name:"CREDIT_CARD_NUMBER"},{name:"DATE_OF_BIRTH"},{name:"DOMAIN_NAME"},{name:"PHONE_NUMBER"},{name:"URL"},{name:"US_SOCIAL_SECURITY_NUMBER"},{name:"IP_ADDRESS"}],aha={nS:"utm_source",SP:"utm_medium",IK:"utm_campaign",gL:"utm_content",xS:"utm_term"},bha=function(a){a.eventHandler.listen(document.body,"devsite-analytics-observation",b=>{b=b.Ja.detail;if("pageScroll"===
b.action||"pageScrollRaw"===b.action)a.cloudtrack.h({type:b.action,name:b.label||""}),_ds.Zy(a.cloudtrack,"pageScroll"===b.action?"page_scroll":"page_scroll_raw",{scrollDepth:b.label||""})})},cha=function(a){a.eventHandler.listen(document.body,"devsite-analytics-sent-pageview",b=>{const c=b.Ja.detail;"trackPageview"===b.Ja.detail.event&&(b=DevsiteApp.hasMendelFlagAccess("Cloud","enable_cloudx_ping"),_ds.hz(a.cloudtrack,c,b),_ds.Zy(a.cloudtrack,"page_view",{pageName:c.pageName,hostingPlatform:"devsite"}))})},
dha=function(a){a.eventHandler.listen(document,"cloud-track-search-focus",()=>{a.cloudtrack.h({type:"search",name:"focus",metadata:{eventDetail:"n/a",search_suggest:"n/a",search_suggest_url:"n/a",position:"nav"}});_ds.Zy(a.cloudtrack,"search_focus")});a.eventHandler.listen(document,"cloud-track-search-input",()=>{a.cloudtrack.h({type:"search",name:"input",metadata:{eventDetail:"n/a",search_suggest:"n/a",search_suggest_url:"n/a",position:"nav"}});_ds.Zy(a.cloudtrack,"search_input")});a.eventHandler.listen(document,
"cloud-track-search-submit",async b=>{var c=b.Ja.detail.query,d=b.Ja.detail.XI;let e="n/a",f="n/a";b="n/a";let g="submit",h="(unknown)";if(DevsiteApp.hasMendelFlagAccess("Cloud","enable_cloud_dlp_service")){const l=[];if(d){var k=d.closest(".devsite-result-item");k instanceof HTMLElement&&(k=k.id,k.includes("partial-query")?h="suggested search":k.includes("other-products")?h="product":k.includes("product")?h="page":k.includes("reference")&&(h="reference"),g+=` - ${h}`);d=d.closest(".devsite-result-item-link");
d instanceof HTMLElement&&(k="",k=Array.from(d.children),k=k.length?k.map(p=>p instanceof HTMLElement?p.innerText:"").join(" "):d.innerText,"suggested search"===h?(d=c2(a,k).then(p=>f=p||"(dlp error)"),l.push(d)):(f=k,b=d.getAttribute("href")||"n/a"))}c&&(c=c2(a,c).then(p=>{e=p||"(dlp error)";e=e.substring(0,100).replace(/([0-9]{5})([0-9]+)/g,"$1[c]")}),l.push(c));await Promise.all(l)}a.cloudtrack.h({type:"search",name:g,metadata:{eventDetail:e,search_suggest:f,search_suggest_url:b,position:"nav"}});
_ds.Zy(a.cloudtrack,"search_submit",{searchSuggestionType:h,searchQuery:e,searchSuggestion:f,searchSuggestionUrl:b})})},eha=function(a){a.eventHandler.listen(document.body,"cloudx-personalization-update",b=>{_ds.gz(a.cloudtrack,{Ea:b.Ja.detail.key,value:b.Ja.detail.value})})},d2=async function(){var a=Array.from(document.querySelectorAll(_ds.MK())).map(c=>window.customElements.whenDefined(c.localName));await Promise.all(a);a=fha();var b=a.Gy;if(a.source&&b){b=$ga.map(c=>`[href*="${c}"]`).join(",");
b=document.querySelectorAll(b);for(const c of b)c instanceof HTMLAnchorElement&&gha(c,a)}},c2=async function(a,b){if(!b.length)return"";b=await Zga(b).catch(c=>{a.cloudtrack.h({type:"dlp error",name:JSON.stringify(c)});_ds.Zy(a.cloudtrack,"error",{errorType:"dlp",errorMessage:JSON.stringify(c)})});return b?b.item.value:(a.cloudtrack.h({type:"dlp error",name:"Unable to call DLP"}),_ds.Zy(a.cloudtrack,"error",{errorType:"dlp",errorMessage:"Unable to call DLP"}),null)},fha=function(){var a=(new URL(window.document.location.href)).searchParams;
const b=a.get("utm_source"),c=a.get("utm_medium"),d=a.get("utm_campaign"),e=a.get("utm_content");a=a.get("utm_term");return{source:b,Gy:c,zE:d,content:e,kJ:a}},gha=function(a,b){var c=a.getAttribute("href"),d=b.source,e=b.Gy,f=b.zE,g=b.content;b=b.kJ;if(c&&d&&e){c=new URL(c);d=[`${"utm_source"}=${d}`,`${"utm_medium"}=${e}`];f&&d.push(`${"utm_campaign"}=${f}`);g&&d.push(`${"utm_content"}=${g}`);b&&d.push(`${"utm_term"}=${b}`);f=Object.values(aha);for(const [h,k]of Array.from(c.searchParams))g=k,e=
h.replace(";",""),f.includes(e)||(g?d.push(`${e}=${g}`):d.push(e));_ds.yd(a,_ds.td(`${c.origin}${c.pathname}?${d.join("&")}`))}},hha=class extends _ds.gv{constructor(){super(...arguments);this.cloudtrack=new _ds.iz;this.eventHandler=new _ds.x}connectedCallback(){super.connectedCallback();this.cloudtrack.Hp();_ds.fz(this.cloudtrack);bha(this);cha(this);dha(this);eha(this);_ds.az(this.cloudtrack);d2();this.eventHandler.listen(document.body,"cloudtrack-decorate-urls",()=>{d2()})}disconnectedCallback(){super.disconnectedCallback();
_ds.B(this.cloudtrack.eventHandler);_ds.B(this.eventHandler)}};try{window.customElements.define("cloudx-track",hha)}catch(a){console.warn("CloudxTrack",a)};})(_ds_www);
